<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>Login</title>
    <link rel="stylesheet" href="../bootstrap-3.3.7-dist/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="../css/1.css">
</head>
<body>
    <div class="container">
            <div class="col-md-7 slogan" style="height: 400px">
                <span>Make Money Now.</span>
            </div>
            <div class="col-md-5 ">
                <div id="login">
                    <form class="form-horizontal" name="logform" role="form">
                        <div class="form-group">
                            <label class="control-label col-md-2 col-md-offset-1" for="name">UserID</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" id="name" placeholder="请输入用户名">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-2 col-md-offset-1" for="password">Passwork</label>
                            <div class="col-md-6">
                                <input type="password" class="form-control" id="password" placeholder="请输入密码">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-2 col-md-offset-1"> </label>
                            <div class="col-md-6">
                                <button type="submit" class="btn btn-default col-md-12 " onClick="login_fun()">Login</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
    </div>
</body>

<script type="text/javascript">
    function login_fun(){
        var userName = document.getElementById("name").value;
        var password = document.getElementById("password").value;
        console.log(userName);
        console.log(password);
        userName = parseInt(userName);

        let url_login = 'http://139.199.166.124:8080/login';
        axios.defaults.withCredentials=true;
        axios.defaults.timeout = 6000;
        // content-type 改成 application/json
        axios.defaults.headers.post['Content-Type']='application/json';
        axios.post(url_login, JSON.stringify({
          "id": userName,
          "password": password
        }))
        .then(function(res){
            console.log(res);//处理成功的函数 相当于success
            window.parent.location.href = "/HomePage";
            })
        .catch(function(error){
            console.log('fail');
            console.log(error);//错误处理 相当于error
        })
        return false;


    	// $.ajax({
     //        type: "post",
     //        dataType: 'json',
    	// 	// url: "http://182.254.206.244:8080/login",
     //        url: "http://139.199.166.124:8080/login", //lt
     //        xhrFields: {
     //            withCredentials: true    // 要在这里设置上传cookie
     //        },
     //        crossDomain: true,
    	// 	data: JSON.stringify({
     //                "id": userName,
     //                "password": password
     //            }),
    	// 	success: function(data){
    	// 		console.log('success');
     //            console.log(document.cookie.length);
     //            window.parent.location.href = "/HomePage";
     //            // window.open("/HomePage");
    	// 	},
    	// 	error: function(Request, status, msg){
    	// 		console.log(Request);
    	// 		console.log(status);
    	// 		console.log(msg);
    	// 		console.log('fail');
    	// 	}
    	// });
    }
</script>
</html>
