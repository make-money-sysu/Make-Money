<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>register</title>
    <link rel="stylesheet" href="../bootstrap-3.3.7-dist/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/1.css">
</head>
<body>
	<script type="text/javascript">
		function mySub(){
			var userName = document.getElementById("name").value;
            var student_num = document.getElementById("student_num").value;
            var sex = document.getElementById("sex").value;
            var real_name = document.getElementById("real_name").value;
			var password = document.getElementById("password").value;
            var password_1 = document.getElementById("password_1").value;
			var age = document.getElementById("age").value;
            var profession = document.getElementById("profession").value;
			var tel = document.getElementById("tel").value;
			var email = document.getElementById("email").value;
			var grade = document.getElementById("grade").value;
            
            var gender = "0";
            if (sex == "男"){
                gender = "1";
            }
			
			if (password != password_1){
				alert("两次输入密码需一致");
				return false;
			}
			if (userName.length<3 || userName.length>6){
				alert("用户名必须为3-6位");
				return false;
			}
			if (password.length < 6){
				alert("密码必须大于6位");
				return false;
            }

            // 注册
            $.ajax({
                type: "post",
                dataType: 'json',
                // url: "http://182.254.206.244:8080/user",
                url: "http://139.199.166.124:8080/user/", //lt
                crossDomain: true,
                data: JSON.stringify({
                    "id" : parseInt(student_num),
                    "password" : password,
                    "real_name" : real_name,
                    "nick_name" : userName,
                    "age" : parseInt(age),
                    "gender" : gender,
                    "head_picture" : "",
                    "balance" : 0,
                    "profession" : profession,
                    "grade" : grade,
                    "phone" : tel,
                    "email" : email
                    }),
                success: function(data){
                    console.log('success');
                    console.log(data);
                    window.parent.location.href = "/HomePage";
                    // window.open("/HomePage");
                },
                error: function(Request, status, msg){
                    console.log(Request);
                    console.log(status);
                    console.log(msg);
                    console.log('fail');
                }
            });
			return true;
		}
		
	</script>
	
	
    <div class="container">
        <div class="col-md-8 col-md-offset-2">
            <form class="form-horizontal" name="regform" id="register" role="form">
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="name">用户名</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="name" id="name" placeholder="请输入用户名">
                    	<span id="isCan" style="color: red;"></span>
					</div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="student_num">学号</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="student_num" id="student_num" placeholder="请输入学号">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="sex">性别</label>
                    <div class="col-md-6">
                        <select class="form-control" name="sex" id="sex" >
                            <option value="male">男</option>
                            <option value="female">女</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="real_name">真实姓名</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="real_name" id="real_name" placeholder="请输入真实姓名">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="password">密码</label>
                    <div class="col-md-6">
                        <input type="password" class="form-control" name="password" id="password" placeholder="请输入密码">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="password_1">确认密码</label>
                    <div class="col-md-6">
                        <input type="password" class="form-control" name="password_1" id="password_1" placeholder="请再次输入密码">
                    </div>
                </div>
				<div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="age">年龄</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="age" id="age" placeholder="请输入年龄">
                    </div>
                </div>
				<div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="profession">专业</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="profession" id="profession" placeholder="请输入专业">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="grade">年级</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="grade" id="grade" placeholder="请输入年级">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="tel">电话</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="tel" id="tel" placeholder="请输入电话">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1" for="email">邮箱</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" name="email" id="email" placeholder="请输入邮箱">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2 col-md-offset-1"> </label>
                    <div class="col-md-6">
                        <button type="submit" class="btn btn-default col-md-12 " onClick="mySub()">注册</button>
                    </div>

                </div>


            </form>
        </div>
    </div>
	
</body>
</html>